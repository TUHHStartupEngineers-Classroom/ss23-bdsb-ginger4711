{
  "hash": "5d6315ebce0fdb5ab4711f3c417f23d4",
  "result": {
    "markdown": "---\ntitle: \"Data Acquisition\"\nauthor: \"Christian Sühl\"\n---\n\n\n# CHALLENGE\n\nAsking the API for the weather on Gran Canaria in this week.\n\n::: {.cell hash='02_data_acquisition_cache/html/unnamed-chunk-1_bfd8a7309ddf347e1972bc0798ee5c43'}\n\n```{.r .cell-code}\n# Task 1. Asking an API.\nlibrary(ggplot2)\n\nweather_api <- function() {\n  url <- modify_url(url = \"https://api.open-meteo.com/v1/forecast?latitude=27.7564556&longitude=-15.5910148&current_weather=true&hourly=temperature_2m,relativehumidity_2m,windspeed_10m\")\n  resp <- GET(url)\n  stop_for_status(resp) # automatically throws an error if a request did not succeed\n}\n\nweather <- weather_api() %>% content()\n\nweather_tbl <- tibble(time = weather[[\"hourly\"]][[\"time\"]],temp = weather[[\"hourly\"]][[\"temperature_2m\"]])\nweather_df <- weather_tbl %>% data.frame\nprint(weather_df) # Print weather as df\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#>                 time temp\n#> 1   2023-05-02T00:00 23.8\n#> 2   2023-05-02T01:00 22.7\n#> 3   2023-05-02T02:00 22.3\n#> 4   2023-05-02T03:00 21.8\n#> 5   2023-05-02T04:00 21.4\n#> 6   2023-05-02T05:00 20.9\n#> 7   2023-05-02T06:00 20.4\n#> 8   2023-05-02T07:00 20.4\n#> 9   2023-05-02T08:00 22.2\n#> 10  2023-05-02T09:00 23.8\n#> 11  2023-05-02T10:00 25.4\n#> 12  2023-05-02T11:00 26.5\n#> 13  2023-05-02T12:00 26.9\n#> 14  2023-05-02T13:00 26.7\n#> 15  2023-05-02T14:00 26.2\n#> 16  2023-05-02T15:00 27.5\n#> 17  2023-05-02T16:00 29.2\n#> 18  2023-05-02T17:00 29.1\n#> 19  2023-05-02T18:00 26.7\n#> 20  2023-05-02T19:00 24.9\n#> 21  2023-05-02T20:00 23.9\n#> 22  2023-05-02T21:00 22.8\n#> 23  2023-05-02T22:00 22.1\n#> 24  2023-05-02T23:00 21.7\n#> 25  2023-05-03T00:00 21.3\n#> 26  2023-05-03T01:00 21.2\n#> 27  2023-05-03T02:00 21.2\n#> 28  2023-05-03T03:00 21.5\n#> 29  2023-05-03T04:00 21.2\n#> 30  2023-05-03T05:00 20.8\n#> 31  2023-05-03T06:00   20\n#> 32  2023-05-03T07:00 20.3\n#> 33  2023-05-03T08:00 21.3\n#> 34  2023-05-03T09:00 22.2\n#> 35  2023-05-03T10:00 24.5\n#> 36  2023-05-03T11:00 25.5\n#> 37  2023-05-03T12:00   26\n#> 38  2023-05-03T13:00 25.8\n#> 39  2023-05-03T14:00 25.8\n#> 40  2023-05-03T15:00 26.9\n#> 41  2023-05-03T16:00 27.3\n#> 42  2023-05-03T17:00 26.9\n#> 43  2023-05-03T18:00 25.9\n#> 44  2023-05-03T19:00 24.5\n#> 45  2023-05-03T20:00 23.6\n#> 46  2023-05-03T21:00 23.1\n#> 47  2023-05-03T22:00 22.6\n#> 48  2023-05-03T23:00 22.1\n#> 49  2023-05-04T00:00 21.8\n#> 50  2023-05-04T01:00 21.4\n#> 51  2023-05-04T02:00 21.1\n#> 52  2023-05-04T03:00 20.7\n#> 53  2023-05-04T04:00 20.5\n#> 54  2023-05-04T05:00 20.3\n#> 55  2023-05-04T06:00   20\n#> 56  2023-05-04T07:00 19.8\n#> 57  2023-05-04T08:00 20.5\n#> 58  2023-05-04T09:00 21.9\n#> 59  2023-05-04T10:00 23.4\n#> 60  2023-05-04T11:00 24.8\n#> 61  2023-05-04T12:00 25.9\n#> 62  2023-05-04T13:00 26.7\n#> 63  2023-05-04T14:00 27.2\n#> 64  2023-05-04T15:00 27.1\n#> 65  2023-05-04T16:00 26.6\n#> 66  2023-05-04T17:00 25.7\n#> 67  2023-05-04T18:00 24.4\n#> 68  2023-05-04T19:00 22.8\n#> 69  2023-05-04T20:00 21.2\n#> 70  2023-05-04T21:00 20.2\n#> 71  2023-05-04T22:00 19.8\n#> 72  2023-05-04T23:00 19.6\n#> 73  2023-05-05T00:00 19.5\n#> 74  2023-05-05T01:00 19.3\n#> 75  2023-05-05T02:00 19.2\n#> 76  2023-05-05T03:00 19.1\n#> 77  2023-05-05T04:00 19.1\n#> 78  2023-05-05T05:00 19.1\n#> 79  2023-05-05T06:00   19\n#> 80  2023-05-05T07:00   19\n#> 81  2023-05-05T08:00 19.9\n#> 82  2023-05-05T09:00 21.5\n#> 83  2023-05-05T10:00 22.9\n#> 84  2023-05-05T11:00   24\n#> 85  2023-05-05T12:00   25\n#> 86  2023-05-05T13:00 25.6\n#> 87  2023-05-05T14:00 25.9\n#> 88  2023-05-05T15:00 26.1\n#> 89  2023-05-05T16:00 26.1\n#> 90  2023-05-05T17:00 25.5\n#> 91  2023-05-05T18:00 24.3\n#> 92  2023-05-05T19:00   23\n#> 93  2023-05-05T20:00 21.4\n#> 94  2023-05-05T21:00 20.4\n#> 95  2023-05-05T22:00 19.8\n#> 96  2023-05-05T23:00 19.4\n#> 97  2023-05-06T00:00 19.2\n#> 98  2023-05-06T01:00   19\n#> 99  2023-05-06T02:00   19\n#> 100 2023-05-06T03:00   19\n#> 101 2023-05-06T04:00   19\n#> 102 2023-05-06T05:00 18.9\n#> 103 2023-05-06T06:00 18.9\n#> 104 2023-05-06T07:00 21.3\n#> 105 2023-05-06T08:00 22.3\n#> 106 2023-05-06T09:00 23.8\n#> 107 2023-05-06T10:00 24.9\n#> 108 2023-05-06T11:00   26\n#> 109 2023-05-06T12:00 27.1\n#> 110 2023-05-06T13:00 27.5\n#> 111 2023-05-06T14:00 27.7\n#> 112 2023-05-06T15:00 27.6\n#> 113 2023-05-06T16:00   27\n#> 114 2023-05-06T17:00 26.1\n#> 115 2023-05-06T18:00 24.9\n#> 116 2023-05-06T19:00 24.1\n#> 117 2023-05-06T20:00 23.4\n#> 118 2023-05-06T21:00 22.7\n#> 119 2023-05-06T22:00 22.5\n#> 120 2023-05-06T23:00 22.5\n#> 121 2023-05-07T00:00 22.6\n#> 122 2023-05-07T01:00 22.5\n#> 123 2023-05-07T02:00 22.4\n#> 124 2023-05-07T03:00 22.3\n#> 125 2023-05-07T04:00 22.1\n#> 126 2023-05-07T05:00 21.9\n#> 127 2023-05-07T06:00 22.1\n#> 128 2023-05-07T07:00 22.8\n#> 129 2023-05-07T08:00 23.8\n#> 130 2023-05-07T09:00 25.4\n#> 131 2023-05-07T10:00 26.6\n#> 132 2023-05-07T11:00 27.9\n#> 133 2023-05-07T12:00 29.2\n#> 134 2023-05-07T13:00 29.6\n#> 135 2023-05-07T14:00 29.7\n#> 136 2023-05-07T15:00 29.4\n#> 137 2023-05-07T16:00   29\n#> 138 2023-05-07T17:00 28.3\n#> 139 2023-05-07T18:00 27.3\n#> 140 2023-05-07T19:00 26.4\n#> 141 2023-05-07T20:00 25.3\n#> 142 2023-05-07T21:00 24.3\n#> 143 2023-05-07T22:00 24.1\n#> 144 2023-05-07T23:00 24.1\n#> 145 2023-05-08T00:00 24.1\n#> 146 2023-05-08T01:00   24\n#> 147 2023-05-08T02:00 23.9\n#> 148 2023-05-08T03:00 23.8\n#> 149 2023-05-08T04:00 23.7\n#> 150 2023-05-08T05:00 23.6\n#> 151 2023-05-08T06:00 23.9\n#> 152 2023-05-08T07:00 24.7\n#> 153 2023-05-08T08:00 25.8\n#> 154 2023-05-08T09:00 27.4\n#> 155 2023-05-08T10:00 28.8\n#> 156 2023-05-08T11:00 30.3\n#> 157 2023-05-08T12:00 31.8\n#> 158 2023-05-08T13:00 32.5\n#> 159 2023-05-08T14:00 32.8\n#> 160 2023-05-08T15:00 32.8\n#> 161 2023-05-08T16:00 32.3\n#> 162 2023-05-08T17:00 31.5\n#> 163 2023-05-08T18:00 30.4\n#> 164 2023-05-08T19:00 29.6\n#> 165 2023-05-08T20:00 28.7\n#> 166 2023-05-08T21:00 27.9\n#> 167 2023-05-08T22:00 27.7\n#> 168 2023-05-08T23:00 27.8\n```\n:::\n\n```{.r .cell-code}\nweather_df$time <- as.numeric(as.POSIXct(strptime(weather_df$time, \"%Y-%m-%dT%H:%M\"))) # Convert time to numberic\nweather_df$temp <- as.numeric(weather_df$temp) # Convert temp to numberic\n\nggplot(weather_df, aes(time, temp)) +\n  geom_point() +\n  scale_y_continuous(limits = c(-10, 40)) # Ploting weather\n```\n\n::: {.cell-output-display}\n![](02_data_acquisition_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::\n\n::: {.cell hash='02_data_acquisition_cache/html/unnamed-chunk-2_d6839d88fb10fbd1529c2daf7cada699'}\n\n```{.r .cell-code}\n# Task 2. Looking at other bike shops.\n\n# Radon-bikes mountainbike category\nurl <- \"https://www.radon-bikes.de/e-bike/mountainbike/\"\n\n# Retrieve names from bikeTitle class\nbike_names <- url %>% \n  read_html() %>% \n  html_nodes(\".bikeTitle > h4\") %>%\n  html_text() \n\n# Retrieve prices from info class\nbike_prices <- url %>% \n  read_html() %>% \n  html_nodes(\".info > div > div > span\") %>%\n  html_text()\n# Since there is a second price in pounds sterling we remove those and only look at the price in euros\nbike_prices <- bike_prices[seq(1,length(bike_prices),2)]\n\n# Transform into tibble and print\ntibble(name = bike_names,price = bike_prices) %>% print()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> # A tibble: 6 × 2\n#>   name              price\n#>   <chr>             <chr>\n#> 1 RENDER AL         3999 \n#> 2 RENDER            4999 \n#> 3 DEFT              4799 \n#> 4 JEALOUS HYBRID    2499 \n#> 5 ZR TEAM HYBRID CX 1799 \n#> 6 ZR LADY HYBRID CX 2499\n```\n:::\n\n```{.r .cell-code}\n# Since there are only 6 different bikes in the mountainbike category, only these are shown\n```\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}